<!DOCTYPE html>
<html>
    
<head>
    <meta charset="UTF-8">
        
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Chewy&display=swap" rel="stylesheet">
<script src="myscripts.js"></script>
<style>
body{height:100vh;width:100vw;font-family: 'Chewy', cursive;font-size:6vw;color:white;position:fixed;left:0;top:0;text-align:center;}
#tp{
width:100vw;position:fixed;
left:0;top:40vh;color:white;
-webkit-transition-property:top,color;
-webkit-transition-duration:.7s; 
-webkit-transition-timing-function: ease; 
z-index:3;
}

#bt{
width:100vw;position:fixed;
left:0;top:calc(40vh + 100px);color:transparent;
-webkit-transition-property:top,color;
-webkit-transition-duration:.7s; 
-webkit-transition-timing-function: ease; 
z-index:3;
}    
</style>

</head><body>

<canvas id="c"></canvas>
<div id="tp">Loading content..</div> 
<div id="bt"></div>
<audio src="https://www.dropbox.com/s/8p99mhxhz4vgozd/merry%20christmas_320%28pagalworld.com.se%29.mp3?dl=0&raw=1" id="audio" preload="none"/>
<script>
var audio=document.getElementById("audio"),playing=false;

var SRT=`﻿1
00:00:01,568 --> 00:00:05,238
BUILD A FIRE
AND GATHER 'ROUND THE TREE

3
00:00:06,405 --> 00:00:14,113
FILL A GLASS AND MAYBE COME
AND SING WITH ME

6
00:00:31,063 --> 00:00:34,000
SO KISS ME UNDER
THE MISTLETOE

7
00:00:34,033 --> 00:00:38,104
POUR OUT THE WINE, LET'S TOAST
AND PRAY FOR DECEMBER SNOW

8
00:00:38,137 --> 00:00:39,539
I KNOW THERE'S BEEN PAIN

9
00:00:39,572 --> 00:00:42,442
THIS YEAR,
BUT IT'S TIME TO LET IT GO

10
00:00:42,475 --> 00:00:44,811
NEXT YEAR, YOU NEVER KNOW

11
00:00:44,844 --> 00:00:47,980
BUT FOR NOW,
MERRY CHRISTMAS, WE'LL

12
00:00:48,013 --> 00:00:50,850
DANCE IN THE KITCHEN
WHILE EMBERS GLOW

13
00:00:50,883 --> 00:00:53,119
WE'VE BOTH KNOWN LOVE,
BUT THIS LOVE THAT WE GOT

14
00:00:53,152 --> 00:00:54,821
IS THE BEST OF ALL

15
00:00:54,854 --> 00:00:57,690
I WISH YOU COULD SEE YOU
THROUGH MY EYES,

16
00:00:57,723 --> 00:00:59,025
THEN YOU WOULD KNOW

17
00:00:59,058 --> 00:01:00,827
MY GOD, YOU LOOK BEAUTIFUL

19
00:01:02,027 --> 00:01:04,897
RIGHT NOW, MERRY CHRISTMAS

20
00:01:04,930 --> 00:01:06,532
THE FIRE IS RAGING ON

22
00:01:08,100 --> 00:01:10,870
AND WE'LL ALL SING
ALONG TO THE SONG

24
00:01:13,305 --> 00:01:14,941
JUST HAVING SO MUCH FUN

26
00:01:16,475 --> 00:01:19,078
WHILE WE'RE HERE,
CAN WE ALL SPARE A THOUGHT

27
00:01:19,111 --> 00:01:21,380
FOR THE ONES WHO HAVE GONE

29
00:01:22,615 --> 00:01:25,551
MERRY CHRISTMAS, EVERYONE

30
00:01:25,584 --> 00:01:28,788
AH-AH-AH-AH

31
00:01:28,821 --> 00:01:33,259
AH-AH-AH-AH

32
00:01:33,292 --> 00:01:37,230
SO JUST KEEP KISSING ME
UNDER THE MISTLETOE

33
00:01:37,263 --> 00:01:41,334
POUR OUT THE WINE, LET'S TOAST
AND PRAY FOR DECEMBER SNOW

34
00:01:41,367 --> 00:01:43,302
I KNOW THERE'S BEEN PAIN
THIS YEAR,

35
00:01:43,335 --> 00:01:45,638
BUT IT'S TIME TO LET IT GO

36
00:01:45,671 --> 00:01:48,040
NEXT YEAR, YOU NEVER KNOW

37
00:01:48,073 --> 00:01:51,177
BUT FOR NOW,
MERRY CHRISTMAS, WE'LL

38
00:01:51,210 --> 00:01:54,080
DANCE IN THE KITCHEN
WHILE EMBERS GLOW

39
00:01:54,113 --> 00:01:55,414
WE'VE BOTH KNOWN LOVE,

40
00:01:55,447 --> 00:01:58,017
BUT THIS LOVE THAT
WE GOT IS THE BEST OF ALL

41
00:01:58,050 --> 00:02:02,288
I WISH YOU COULD SEE YOU
THROUGH MY EYES, THEN YOU
WOULD KNOW

42
00:02:02,321 --> 00:02:04,056
MY GOD, YOU LOOK BEAUTIFUL

44
00:02:05,257 --> 00:02:08,127
RIGHT NOW, MERRY CHRISTMAS

45
00:02:08,160 --> 00:02:11,464
I FEEL IT WHEN IT COMES

46
00:02:11,497 --> 00:02:14,000
EVERY YEAR HELPING US
CARRY ON

48
00:02:16,569 --> 00:02:18,371
FILLED UP WITH SO MUCH LOVE

50
00:02:19,738 --> 00:02:22,742
ALL OUR FAMILY AND FRIENDS
ARE TOGETHER

51
00:02:22,775 --> 00:02:25,011
WHERE WE ALL BELONG

53
00:02:26,045 --> 00:02:31,384
MERRY CHRISTMAS, EVERYONE
AH-AH-AH-AH

55
00:02:33,419 --> 00:02:35,388
AH-AH-AH-AH

57
00:02:37,690 --> 00:02:39,892
AH-AH-AH-AH

59
00:02:41,760 --> 00:02:45,498
AH-AH-AH-AH

60
00:02:45,531 --> 00:02:49,302
IT'S CHRISTMAS TIME
FOR YOU AND I

61
00:02:49,335 --> 00:02:53,906
WE'LL HAVE A GOOD NIGHT
AND A MERRY CHRISTMAS

62
00:02:53,939 --> 00:02:57,777
IT'S CHRISTMAS TIME FOR YOU
AND I

63
00:02:57,810 --> 00:03:02,148
WE'LL HAVE A GOOD NIGHT
AND A MERRY CHRISTMAS

64
00:03:02,181 --> 00:03:06,052
IT'S CHRISTMAS TIME FOR YOU
AND I

65
00:03:06,085 --> 00:03:10,823
WE'LL HAVE A GOOD NIGHT
AND A MERRY CHRISTMAS

66
00:03:10,856 --> 00:03:14,527
IT'S CHRISTMAS TIME FOR YOU
AND I

67
00:03:14,560 --> 00:03:23,469
WE'LL HAVE A GOOD NIGHT
AND A MERRY CHRISTMAS TIME
`;

const $=_=>{return document.getElementById(_)};

const fade=(_)=>{
$('bt').innerHTML=_;
$('tp').style.WebkitTransitionDuration='.7s';
$('tp').style.top='25vh';
$('tp').style.color='transparent';    
$('bt').style.WebkitTransitionDuration='.7s';
$('bt').style.top='40vh';
$('bt').style.color='white';  
setTimeout(()=>{
$('tp').style.WebkitTransitionDuration='0s'; 
$('tp').style.top='calc(40vh + 150px)'},700)
}

const fade2=(_)=>{
$('tp').innerHTML=_;
$('bt').style.WebkitTransitionDuration='.7s';
$('bt').style.top='25vh';
$('bt').style.color='transparent';    
$('tp').style.WebkitTransitionDuration='.7s';
$('tp').style.top='40vh';
$('tp').style.color='white';  
setTimeout(()=>{
$('bt').style.WebkitTransitionDuration='0s'; 
$('bt').style.top='calc(40vh + 150px)'},700)
}

const ToScnd=time=>{t=time.split(':');
return parseFloat(t[2])+parseFloat(t[1])*60}

const Reader=(srt,time)=>{var now='&#119136; Music &#119136;';
srt.split('\n\n').forEach(d1=>{d2=d1.split('\n');
if(time>ToScnd(d2[1].split(' ')[0].split(',')[0])&&time<ToScnd(d2[1].split(' ')[2].split(',')[0])){now=d2[2]+'<br/>'+(d2[3]!=undefined?d2[3]:'')}});return now}


//audio.currentTime=160;
let xy="",z=0,start=true;

/*
playing=true;$('tp').innerHTML=Reader(SRT,audio.currentTime);$('bt').innerHTML=Reader(SRT,audio.currentTime);}else{
var playPromise = audio.pause();
if (playPromise !== undefined) {
  playPromise.then(function() {
  }).catch(function(error) { });}
playing=false;$('tp').innerHTML="Audio pused<br>Tap to resume";$('bt').innerHTML="Audio pused<br>Tap to resume";}
if(start)$('tp').innerHTML='Audio data loading...<br>Please wait';start=false
*/


audio.ontimeupdate=()=>{
if(xy!=Reader(SRT,audio.currentTime)){
z%2==0?fade(Reader(SRT,audio.currentTime)):fade2(Reader(SRT,audio.currentTime));z++;
}
xy=Reader(SRT,audio.currentTime)
}
audio.onended=()=>{
if(!playing){
var playPromise = audio.play();
if (playPromise !== undefined) {
  playPromise.then(function() {
  }).catch(function(error) { });}
}   
};
</script>
</body>
</html>